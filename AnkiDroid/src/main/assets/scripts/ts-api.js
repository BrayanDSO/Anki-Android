var AnkiDroidJsApi=function(u){"use strict";var N=Object.defineProperty;var A=(u,n,h)=>n in u?N(u,n,{enumerable:!0,configurable:!0,writable:!0,value:h}):u[n]=h;var i=(u,n,h)=>A(u,typeof n!="symbol"?n+"":n,h);const n={IS_SYSTEM_IN_DARK_MODE:"isSystemInDarkMode",IS_NETWORK_METERED:"isNetworkMetered"};class h{constructor(e){this.handler=e}isSystemInDarkMode(){return this.handleRequest(n.IS_SYSTEM_IN_DARK_MODE)}isNetworkMetered(){return this.handleRequest(n.IS_NETWORK_METERED)}async handleRequest(e,t){return this.handler.request(`android/${e}`,t)}}const s={GET_ID:"getId",IS_MARKED:"isMarked",GET_FLAG:"getFlag",GET_REPS:"getReps",GET_INTERVAL:"getInterval",GET_FACTOR:"getFactor",GET_MOD:"getMod",GET_NID:"getNid",GET_TYPE:"getType",GET_DID:"getDid",GET_LEFT:"getLeft",GET_ODID:"getOdid",GET_ODUE:"getOdue",GET_QUEUE:"getQueue",GET_LAPSES:"getLapses",GET_DUE:"getDue",BURY:"bury",SUSPEND:"suspend",RESET_PROGRESS:"resetProgress",TOGGLE_FLAG:"toggleFlag"};class S{constructor(e,t=null){i(this,"id");this.handler=e,this.id=t}getId(){return this.id!==null?Promise.resolve({success:!0,value:this.id}):this.handleRequest(s.GET_ID)}isMarked(){return this.handleRequest(s.IS_MARKED)}getFlag(){return this.handleRequest(s.GET_FLAG)}getReps(){return this.handleRequest(s.GET_REPS)}getInterval(){return this.handleRequest(s.GET_INTERVAL)}getFactor(){return this.handleRequest(s.GET_FACTOR)}getMod(){return this.handleRequest(s.GET_MOD)}getNid(){return this.handleRequest(s.GET_NID)}getType(){return this.handleRequest(s.GET_TYPE)}getDid(){return this.handleRequest(s.GET_DID)}getLeft(){return this.handleRequest(s.GET_LEFT)}getODid(){return this.handleRequest(s.GET_ODID)}getODue(){return this.handleRequest(s.GET_ODUE)}getQueue(){return this.handleRequest(s.GET_QUEUE)}getLapses(){return this.handleRequest(s.GET_LAPSES)}getDue(){return this.handleRequest(s.GET_DUE)}bury(){return this.handleRequest(s.BURY)}suspend(){return this.handleRequest(s.SUSPEND)}resetProgress(){return this.handleRequest(s.RESET_PROGRESS)}toggleFlag(e){return e<0||e>7?(console.error("toggleFlag: flag must be an integer between 0 and 7."),Promise.resolve()):this.handleRequest(s.TOGGLE_FLAG,{flag:e})}async handleRequest(e,t){return this.handler.request(`card/${e}`,{id:this.id,data:t})}}const R={GET_ID:"getId",GET_NAME:"getName",IS_FILTERED:"isFiltered"};class l{constructor(e,t=null){i(this,"id");this.handler=e,this.id=t}getId(){return this.id!==null?Promise.resolve({success:!0,value:this.id}):this.handleRequest(R.GET_ID)}getName(){return this.handleRequest(R.GET_NAME)}isFiltered(){return this.handleRequest(R.IS_FILTERED)}async handleRequest(e,t){return this.handler.request(`deck/${e}`,{id:this.id,data:t})}}const a={GET_ID:"getId",BURY:"bury",SUSPEND:"suspend",GET_TAGS:"getTags",SET_TAGS:"setTags",TOGGLE_MARK:"toggleMark"};class _{constructor(e,t=null){i(this,"id");this.handler=e,this.id=t}getId(){return this.id!==null?Promise.resolve({success:!0,value:this.id}):this.handleRequest(a.GET_ID)}bury(){return this.handleRequest(a.BURY)}suspend(){return this.handleRequest(a.SUSPEND)}getTags(){return this.handleRequest(a.GET_TAGS)}setTags(e){return this.handleRequest(a.SET_TAGS,e)}toggleMark(){return this.handleRequest(a.TOGGLE_MARK)}async handleRequest(e,t){return this.handler.request(`note/${e}`,{id:this.id,data:t})}}const E={SPEAK:"speak",SET_LANGUAGE:"setLanguage",SET_PITCH:"setPitch",SET_SPEECH_RATE:"setSpeechRate",IS_SPEAKING:"isSpeaking",STOP:"stop"};class c{constructor(e){this.handler=e}speak(){return this.handleRequest(E.SPEAK)}setLanguage(){return this.handleRequest(E.SET_LANGUAGE)}setPitch(){return this.handleRequest(E.SET_PITCH)}setSpeechRate(){return this.handleRequest(E.SET_SPEECH_RATE)}isSpeaking(){return this.handleRequest(E.IS_SPEAKING)}stop(){return this.handleRequest(E.STOP)}async handleRequest(e,t){return this.handler.request(`tts/${e}`,t)}}const r={SHOW_SNACKBAR:"showSnackbar",GET_NEW_COUNT:"getNewCount",GET_LRN_COUNT:"getLrnCount",GET_REV_COUNT:"getRevCount",SHOW_ANSWER:"showAnswer",ANSWER:"answer",IS_SHOWING_ANSWER:"isShowingAnswer",GET_NEXT_TIME:"getNextTime",CARD_INFO:"cardInfo",EDIT_NOTE:"editNote",SEARCH:"search",SET_BACKGROUND_COLOR:"setBackgroundColor"};class g{constructor(e){i(this,"android");i(this,"card");i(this,"note");i(this,"deck");i(this,"tts");this.contract=e,this.android=new h(this),this.card=new S(this),this.note=new _(this),this.deck=new l(this),this.tts=new c(this)}getCard(e){return new S(this,e)}getNote(e){return new _(this,e)}getDeck(e){return new l(this,e)}showSnackbar(e,t){return this.studyScreenRequest(r.SHOW_SNACKBAR,{text:e,duration:t})}getNewCount(){return this.studyScreenRequest(r.GET_NEW_COUNT)}getLearningCount(){return this.studyScreenRequest(r.GET_LRN_COUNT)}getReviewingCount(){return this.studyScreenRequest(r.GET_REV_COUNT)}showAnswer(){return this.studyScreenRequest(r.SHOW_ANSWER)}answer(e){return this.studyScreenRequest(r.ANSWER,e)}isShowingAnswer(){return this.studyScreenRequest(r.IS_SHOWING_ANSWER)}getNextTime(e){return this.studyScreenRequest(r.GET_NEXT_TIME,e)}cardInfo(e){return this.studyScreenRequest(r.CARD_INFO,e)}editNote(e){return this.studyScreenRequest(r.EDIT_NOTE,e)}search(e){return this.studyScreenRequest(r.SEARCH,e)}setBackgroundColor(e){return this.studyScreenRequest(r.SET_BACKGROUND_COLOR,e)}studyScreenRequest(e,t){return this.request(`studyScreen/${e}`,t)}async request(e,t){let d=t;d!=null&&(typeof d=="object"&&!Array.isArray(d)||(d={data:d}));const G=`/jsapi/${e}`;try{const o=await fetch(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({version:this.contract.version,developer:this.contract.developer,data:d})});if(!o.ok)throw new Error("Failed to make the request");const q=await o.text();return JSON.parse(q)}catch(o){throw console.error("Request error:",o),o}}}return u.StudyScreen=g,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),u}({});
