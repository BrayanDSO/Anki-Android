var AnkiDroidJsApi=function(u){"use strict";var G=Object.defineProperty;var N=(u,n,h)=>n in u?G(u,n,{enumerable:!0,configurable:!0,writable:!0,value:h}):u[n]=h;var i=(u,n,h)=>N(u,typeof n!="symbol"?n+"":n,h);const n={IS_SYSTEM_IN_DARK_MODE:"isSystemInDarkMode",IS_NETWORK_METERED:"isNetworkMetered"};class h{constructor(e){this.handler=e}isSystemInDarkMode(){return this.handleRequest(n.IS_SYSTEM_IN_DARK_MODE)}isNetworkMetered(){return this.handleRequest(n.IS_NETWORK_METERED)}async handleRequest(e,s){return this.handler.request(`android/${e}`,s)}}const t={GET_ID:"getId",IS_MARKED:"isMarked",GET_FLAG:"getFlag",GET_REPS:"getReps",GET_INTERVAL:"getInterval",GET_FACTOR:"getFactor",GET_MOD:"getMod",GET_NID:"getNid",GET_TYPE:"getType",GET_DID:"getDid",GET_LEFT:"getLeft",GET_ODID:"getOdid",GET_ODUE:"getOdue",GET_QUEUE:"getQueue",GET_LAPSES:"getLapses",GET_DUE:"getDue",BURY:"bury",SUSPEND:"suspend",RESET_PROGRESS:"resetProgress",TOGGLE_FLAG:"toggleFlag"};class T{constructor(e,s=null){i(this,"id");this.handler=e,this.id=s}getId(){return this.id!==null?Promise.resolve({success:!0,value:this.id}):this.handleRequest(t.GET_ID)}isMarked(){return this.handleRequest(t.IS_MARKED)}getFlag(){return this.handleRequest(t.GET_FLAG)}getReps(){return this.handleRequest(t.GET_REPS)}getInterval(){return this.handleRequest(t.GET_INTERVAL)}getFactor(){return this.handleRequest(t.GET_FACTOR)}getMod(){return this.handleRequest(t.GET_MOD)}getNid(){return this.handleRequest(t.GET_NID)}getType(){return this.handleRequest(t.GET_TYPE)}getDid(){return this.handleRequest(t.GET_DID)}getLeft(){return this.handleRequest(t.GET_LEFT)}getODid(){return this.handleRequest(t.GET_ODID)}getODue(){return this.handleRequest(t.GET_ODUE)}getQueue(){return this.handleRequest(t.GET_QUEUE)}getLapses(){return this.handleRequest(t.GET_LAPSES)}getDue(){return this.handleRequest(t.GET_DUE)}bury(){return this.handleRequest(t.BURY)}suspend(){return this.handleRequest(t.SUSPEND)}resetProgress(){return this.handleRequest(t.RESET_PROGRESS)}toggleFlag(e){return e<0||e>7?(console.error("toggleFlag: flag must be an integer between 0 and 7."),Promise.resolve()):this.handleRequest(t.TOGGLE_FLAG,{flag:e})}async handleRequest(e,s){return this.handler.request(`card/${e}`,{id:this.id,data:s})}}const R={GET_ID:"getId",GET_NAME:"getName",IS_FILTERED:"isFiltered"};class l{constructor(e,s=null){i(this,"id");this.handler=e,this.id=s}getId(){return this.id!==null?Promise.resolve({success:!0,value:this.id}):this.handleRequest(R.GET_ID)}getName(){return this.handleRequest(R.GET_NAME)}isFiltered(){return this.handleRequest(R.IS_FILTERED)}async handleRequest(e,s){return this.handler.request(`deck/${e}`,{id:this.id,data:s})}}const a={GET_ID:"getId",BURY:"bury",SUSPEND:"suspend",GET_TAGS:"getTags",SET_TAGS:"setTags",TOGGLE_MARK:"toggleMark"};class _{constructor(e,s=null){i(this,"id");this.handler=e,this.id=s}getId(){return this.id!==null?Promise.resolve({success:!0,value:this.id}):this.handleRequest(a.GET_ID)}bury(){return this.handleRequest(a.BURY)}suspend(){return this.handleRequest(a.SUSPEND)}getTags(){return this.handleRequest(a.GET_TAGS)}setTags(e){return this.handleRequest(a.SET_TAGS,e)}toggleMark(){return this.handleRequest(a.TOGGLE_MARK)}async handleRequest(e,s){return this.handler.request(`note/${e}`,{id:this.id,data:s})}}const r={SHOW_SNACKBAR:"showSnackbar",GET_NEW_COUNT:"getNewCount",GET_LRN_COUNT:"getLrnCount",GET_REV_COUNT:"getRevCount",SHOW_ANSWER:"showAnswer",ANSWER:"answer",IS_SHOWING_ANSWER:"isShowingAnswer",GET_NEXT_TIME:"getNextTime",CARD_INFO:"cardInfo",EDIT_NOTE:"editNote",SEARCH:"search",SET_BACKGROUND_COLOR:"setBackgroundColor"};class c{constructor(e){i(this,"android");i(this,"card");i(this,"note");i(this,"deck");this.contract=e,this.android=new h(this),this.card=new T(this),this.note=new _(this),this.deck=new l(this)}getCard(e){return new T(this,e)}getNote(e){return new _(this,e)}getDeck(e){return new l(this,e)}showSnackbar(e,s){return this.studyScreenRequest(r.SHOW_SNACKBAR,{text:e,duration:s})}getNewCount(){return this.studyScreenRequest(r.GET_NEW_COUNT)}getLearningCount(){return this.studyScreenRequest(r.GET_LRN_COUNT)}getReviewingCount(){return this.studyScreenRequest(r.GET_REV_COUNT)}showAnswer(){return this.studyScreenRequest(r.SHOW_ANSWER)}answer(e){return this.studyScreenRequest(r.ANSWER,{rating:e})}isShowingAnswer(){return this.studyScreenRequest(r.IS_SHOWING_ANSWER)}getNextTime(e){return this.studyScreenRequest(r.GET_NEXT_TIME,e)}cardInfo(e){return this.studyScreenRequest(r.CARD_INFO,e)}editNote(e){return this.studyScreenRequest(r.EDIT_NOTE,e)}search(e){return this.studyScreenRequest(r.SEARCH,e)}setBackgroundColor(e){return this.studyScreenRequest(r.SET_BACKGROUND_COLOR,e)}studyScreenRequest(e,s){return this.request(`studyScreen/${e}`,s)}async request(e,s){let d=s;d!=null&&(typeof d=="object"&&!Array.isArray(d)||(d={data:d}));const S=`/jsapi/${e}`;try{const E=await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({version:this.contract.version,developer:this.contract.developer,data:d})});if(!E.ok)throw new Error("Failed to make the request");const g=await E.text();return JSON.parse(g)}catch(E){throw console.error("Request error:",E),E}}}return u.StudyScreen=c,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),u}({});
